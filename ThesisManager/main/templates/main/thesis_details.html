{% extends "main/base.html" %}

{% block page_title %}{{ thesis.title|title }}{% endblock %}

{% block main_body %}
    {% if thesis %} 
        <ul class='thesis_desc'>
            <li class='thesis_block'>
                {% include "main/thesis_details_template.html" %}
            </li>
        </ul>
        <div class="bottom-options">
            <div class="crud-bottom-options">
                {% if user.account_type == 'admin' or user.account_type == 'unit coordinator' %}
                    <a href="{% url 'modify' thesis.topic_number %}">Edit</a>
                    <a href="{% url 'delete_data' thesis.topic_number %}">Delete</a>
                {% elif user.account_type == 'supervisor' %}
                    <a href="{% url 'create_request' crud_action='modify' topic_number=thesis.topic_number %}">Edit</a>
                    <a href="{% url 'create_request' crud_action='delete' topic_number=thesis.topic_number %}">Delete</a>
                {% elif user.account_type == 'student' %}
                    <a href="#">Apply</a>
                {% endif %}
            </div>
            <form method="post" action="{% url 'thesis_list' %}">
                {% csrf_token %}
                <input type="hidden" name="thesis-list" value="{% if request.META.HTTP_REFERER %}{{ request.META.HTTP_REFERER }}{% else %}/{% endif %}">
                <button class='back' type="submit">Back to Thesis List</button>
            </form>
        </div>
    {% else %}
        <div class="error_message">
            <h2>{{ error_message }}</h2>
            <p><em>Please input a valid thesis number and try again.</em></p>
        </div>
        <div class="bottom-options">
            <form method="post" action="{% url 'thesis_list' %}">
                {% csrf_token %}
                <input type="hidden" name="thesis-list" value="{% if request.META.HTTP_REFERER %}{{ request.META.HTTP_REFERER }}{% else %}/{% endif %}">
                <button class='back' type="submit">Back to Thesis List</button>
            </form>
        </div>
    {% endif %}

    <div class="other_thesis">
        <h3>See other Thesis</h3>
        <ul class='all_theses'>
            {% for thesis in random_theses %}
                <li class='other_thesis_title'>
                    <p class="recommendations"><a href="{% url 'thesis_details' topic_number=thesis.topic_number %}">{{ thesis.title|title }}</a></p>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
